---
phase: 01-foundation-design-system
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - frontend/src/lib/utils.ts
  - frontend/src/components/ui/Button.tsx
  - frontend/src/components/layout/BottomNav.tsx
  - frontend/src/pages/UploadPage.tsx
  - frontend/src/pages/EditorPage.tsx
  - frontend/src/pages/LibraryPage.tsx
  - frontend/src/stores/uiStore.ts
  - frontend/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can tap Upload tab and see Upload page content"
    - "User can tap Editor tab and see Editor page content"
    - "User can tap Library tab and see Library page content"
    - "Tab navigation is fixed at the bottom of the screen"
    - "Active tab is visually highlighted (blue color)"
    - "All tab buttons are at least 44px in height for comfortable touch"
    - "Page transitions happen instantly without page reload"
  artifacts:
    - path: "frontend/src/lib/utils.ts"
      provides: "cn() utility for Tailwind class merging"
      contains: "twMerge"
    - path: "frontend/src/components/ui/Button.tsx"
      provides: "Touch-friendly button with 44px minimum target"
      contains: "min-h-[44px]"
    - path: "frontend/src/components/layout/BottomNav.tsx"
      provides: "Fixed bottom navigation with tab links"
      contains: "NavLink"
    - path: "frontend/src/stores/uiStore.ts"
      provides: "Zustand store for UI state"
      contains: "create"
    - path: "frontend/src/App.tsx"
      provides: "Router configuration with routes"
      contains: "BrowserRouter"
  key_links:
    - from: "frontend/src/App.tsx"
      to: "frontend/src/components/layout/BottomNav.tsx"
      via: "component import and render"
      pattern: "import.*BottomNav"
    - from: "frontend/src/components/layout/BottomNav.tsx"
      to: "React Router"
      via: "NavLink component"
      pattern: "NavLink.*to="
    - from: "frontend/src/App.tsx"
      to: "frontend/src/pages/*Page.tsx"
      via: "Route element prop"
      pattern: "Route.*element.*Page"
---

<objective>
Create the app shell with bottom tab navigation, page routing, and foundational UI components.

Purpose: Enable users to navigate between Upload, Editor, and Library tabs without page reloads, establishing the SPA navigation pattern for the entire app.

Output: Working tab navigation with three placeholder pages, a reusable Button component with 44px+ touch targets, and a Zustand store for UI state.
</objective>

<execution_context>
@C:\Users\OmriS\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\OmriS\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
@.planning/phases/01-foundation-design-system/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create utility functions and base UI components</name>
  <files>
    frontend/src/lib/utils.ts
    frontend/src/components/ui/Button.tsx
  </files>
  <action>
    Create frontend/src/lib/utils.ts:
    ```typescript
    import { type ClassValue, clsx } from 'clsx';
    import { twMerge } from 'tailwind-merge';

    export function cn(...inputs: ClassValue[]) {
      return twMerge(clsx(inputs));
    }
    ```

    Create frontend/src/components/ui/Button.tsx:
    ```typescript
    import { cn } from '@/lib/utils';
    import { ButtonHTMLAttributes, forwardRef } from 'react';

    interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
      variant?: 'primary' | 'secondary' | 'ghost';
      size?: 'sm' | 'md' | 'lg';
    }

    export const Button = forwardRef<HTMLButtonElement, ButtonProps>(
      ({ className, variant = 'primary', size = 'md', children, ...props }, ref) => {
        return (
          <button
            ref={ref}
            className={cn(
              // Base: minimum 44px touch target (WCAG AAA)
              "inline-flex items-center justify-center rounded-lg font-medium",
              "min-h-[44px] min-w-[44px]",
              "transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",
              "disabled:pointer-events-none disabled:opacity-50",
              // Variants
              variant === 'primary' && "bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800",
              variant === 'secondary' && "bg-gray-800 text-gray-100 hover:bg-gray-700 active:bg-gray-600",
              variant === 'ghost' && "bg-transparent text-gray-100 hover:bg-gray-800 active:bg-gray-700",
              // Sizes
              size === 'sm' && "px-3 py-2 text-sm",
              size === 'md' && "px-4 py-2",
              size === 'lg' && "px-6 py-3 text-lg",
              className
            )}
            {...props}
          >
            {children}
          </button>
        );
      }
    );
    Button.displayName = 'Button';
    ```

    Create the directory structure if needed:
    - frontend/src/lib/
    - frontend/src/components/ui/
    - frontend/src/components/layout/
  </action>
  <verify>
    Files exist at the specified paths.
    No TypeScript errors when running `cd frontend && npx tsc --noEmit`.
  </verify>
  <done>
    cn() utility created for Tailwind class merging.
    Button component created with 44px minimum touch target.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Zustand store and page components</name>
  <files>
    frontend/src/stores/uiStore.ts
    frontend/src/pages/UploadPage.tsx
    frontend/src/pages/EditorPage.tsx
    frontend/src/pages/LibraryPage.tsx
  </files>
  <action>
    Create frontend/src/stores/uiStore.ts:
    ```typescript
    import { create } from 'zustand';

    type Tab = 'upload' | 'editor' | 'library';

    interface UIState {
      activeTab: Tab;
      setActiveTab: (tab: Tab) => void;
    }

    export const useUIStore = create<UIState>()((set) => ({
      activeTab: 'upload',
      setActiveTab: (tab) => set({ activeTab: tab }),
    }));
    ```

    Create frontend/src/pages/UploadPage.tsx:
    ```typescript
    import { Button } from '@/components/ui/Button';

    export function UploadPage() {
      return (
        <div className="p-4">
          <h1 className="text-2xl font-bold mb-4">Upload Video</h1>
          <p className="text-gray-400 mb-6">
            Drag and drop a video file or tap to select from your device.
          </p>
          <div className="border-2 border-dashed border-gray-700 rounded-xl p-8 text-center">
            <p className="text-gray-500 mb-4">Upload area placeholder</p>
            <Button variant="primary">Select Video</Button>
          </div>
        </div>
      );
    }
    ```

    Create frontend/src/pages/EditorPage.tsx:
    ```typescript
    export function EditorPage() {
      return (
        <div className="p-4">
          <h1 className="text-2xl font-bold mb-4">Timeline Editor</h1>
          <p className="text-gray-400">
            Edit your video segments here. Canvas timeline will appear after uploading a video.
          </p>
          <div className="mt-6 bg-gray-900 rounded-xl p-8 text-center">
            <p className="text-gray-500">Timeline canvas placeholder</p>
          </div>
        </div>
      );
    }
    ```

    Create frontend/src/pages/LibraryPage.tsx:
    ```typescript
    export function LibraryPage() {
      return (
        <div className="p-4">
          <h1 className="text-2xl font-bold mb-4">Exercise Library</h1>
          <p className="text-gray-400 mb-6">
            Your saved exercises will appear here.
          </p>
          <div className="grid gap-4">
            <div className="bg-gray-900 rounded-xl p-4 text-center">
              <p className="text-gray-500">No exercises yet</p>
            </div>
          </div>
        </div>
      );
    }
    ```

    Create directories if needed:
    - frontend/src/stores/
    - frontend/src/pages/
  </action>
  <verify>
    All files exist at specified paths.
    No TypeScript errors when running `cd frontend && npx tsc --noEmit`.
  </verify>
  <done>
    Zustand uiStore created with activeTab state.
    Three placeholder pages created (Upload, Editor, Library).
  </done>
</task>

<task type="auto">
  <name>Task 3: Create BottomNav and wire up App routing</name>
  <files>
    frontend/src/components/layout/BottomNav.tsx
    frontend/src/App.tsx
  </files>
  <action>
    Create frontend/src/components/layout/BottomNav.tsx:
    ```typescript
    import { NavLink } from 'react-router-dom';
    import { Upload, Film, Library } from 'lucide-react';
    import { cn } from '@/lib/utils';

    const tabs = [
      { to: '/', icon: Upload, label: 'Upload' },
      { to: '/editor', icon: Film, label: 'Editor' },
      { to: '/library', icon: Library, label: 'Library' },
    ] as const;

    export function BottomNav() {
      return (
        <nav className="fixed bottom-0 inset-x-0 bg-gray-900 border-t border-gray-800 safe-area-pb z-50">
          <div className="flex justify-around">
            {tabs.map(({ to, icon: Icon, label }) => (
              <NavLink
                key={to}
                to={to}
                end={to === '/'}
                className={({ isActive }) => cn(
                  "flex flex-col items-center justify-center",
                  "min-h-[56px] min-w-[64px] px-3 py-2",  // 44px+ touch target
                  "text-gray-400 transition-colors",
                  isActive && "text-blue-500"
                )}
              >
                <Icon className="w-6 h-6" />
                <span className="text-xs mt-1">{label}</span>
              </NavLink>
            ))}
          </div>
        </nav>
      );
    }
    ```

    Replace frontend/src/App.tsx with full routing:
    ```typescript
    import { BrowserRouter, Routes, Route } from 'react-router-dom';
    import { BottomNav } from '@/components/layout/BottomNav';
    import { UploadPage } from '@/pages/UploadPage';
    import { EditorPage } from '@/pages/EditorPage';
    import { LibraryPage } from '@/pages/LibraryPage';

    export default function App() {
      return (
        <BrowserRouter>
          <div className="min-h-screen bg-gray-950 text-gray-100 pb-[72px]">
            <Routes>
              <Route path="/" element={<UploadPage />} />
              <Route path="/editor" element={<EditorPage />} />
              <Route path="/library" element={<LibraryPage />} />
            </Routes>
            <BottomNav />
          </div>
        </BrowserRouter>
      );
    }
    ```

    NOTE: The pb-[72px] on the main container accounts for the fixed bottom nav height (56px nav + 16px safe area buffer).
  </action>
  <verify>
    Run `cd frontend && npm run dev`.
    Open http://localhost:3000:
    - Bottom nav appears with three tabs (Upload, Editor, Library)
    - Tapping each tab navigates to that page without page reload
    - Active tab is highlighted in blue
    - Tab buttons are at least 44px tall for comfortable touch
    - URL updates when navigating (/editor, /library)
  </verify>
  <done>
    BottomNav component created with NavLink active state styling.
    App.tsx wired with BrowserRouter and three routes.
    Tab navigation works without page reload.
    Active tab highlighted in blue.
  </done>
</task>

</tasks>

<verification>
Complete verification of Phase 1 app shell:

1. Start dev server: `cd frontend && npm run dev`
2. Open http://localhost:3000 in mobile viewport (Chrome DevTools device mode)
3. Verify dark theme displays correctly (gray-950 background)
4. Verify RTL direction (text should flow right-to-left)
5. Tap each tab (Upload, Editor, Library) - should navigate instantly without page reload
6. Verify active tab is highlighted in blue
7. Verify tab buttons are comfortable to tap (visually check 44px+ height)
8. Check URL changes when navigating (/editor, /library, /)
9. Verify bottom nav stays fixed at bottom during scroll (add enough content to scroll if needed)
10. Check no console errors in browser DevTools
</verification>

<success_criteria>
- Tab navigation works between Upload, Editor, and Library pages
- No page reload on navigation (SPA behavior)
- Active tab is visually highlighted (blue text)
- Bottom nav is fixed at bottom of screen
- All interactive elements (buttons, tabs) are at least 44px for touch
- RTL layout active for Hebrew support
- Dark theme displays consistently across all pages
- Zustand store created (even if not yet used actively)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-02-SUMMARY.md`
</output>
