---
phase: 01-foundation-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/vite.config.ts
  - frontend/tsconfig.json
  - frontend/tsconfig.node.json
  - frontend/index.html
  - frontend/src/index.css
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/vite-env.d.ts
autonomous: true

must_haves:
  truths:
    - "Running npm run dev in frontend/ starts Vite dev server on port 3000"
    - "Dev server proxies /api, /process, /download, /get-tags, /share-receiver to Flask on port 5000"
    - "App displays dark background (gray-950) when loaded"
    - "Hebrew text direction is RTL (right-to-left)"
    - "Running npm run build outputs files to ../static/react/"
  artifacts:
    - path: "frontend/package.json"
      provides: "Project manifest with React, Tailwind, dependencies"
      contains: "react-router-dom"
    - path: "frontend/vite.config.ts"
      provides: "Vite configuration with Tailwind plugin and Flask proxy"
      contains: "proxy"
    - path: "frontend/src/index.css"
      provides: "Tailwind import with dark mode variant"
      contains: "@import \"tailwindcss\""
    - path: "frontend/index.html"
      provides: "HTML shell with RTL and dark class"
      contains: "dir=\"rtl\""
  key_links:
    - from: "frontend/vite.config.ts"
      to: "http://localhost:5000"
      via: "proxy configuration"
      pattern: "target.*localhost:5000"
    - from: "frontend/src/main.tsx"
      to: "frontend/src/App.tsx"
      via: "React root render"
      pattern: "import.*App"
---

<objective>
Initialize the Vite + React + TypeScript + Tailwind CSS 4 project with Flask backend proxy.

Purpose: Establish the foundation that all other Phase 1 work builds upon - a working React dev environment that connects to the existing Flask backend.

Output: A `frontend/` directory with working Vite dev server, Tailwind CSS 4 with dark theme, RTL support for Hebrew, and proxy configuration for Flask API calls.
</objective>

<execution_context>
@C:\Users\OmriS\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\OmriS\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite React TypeScript project</name>
  <files>
    frontend/package.json
    frontend/vite.config.ts
    frontend/tsconfig.json
    frontend/tsconfig.node.json
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/vite-env.d.ts
  </files>
  <action>
    Run `npm create vite@latest frontend -- --template react-ts` from the project root.

    After scaffolding, cd into frontend/ and install dependencies:
    - Core: `npm install react-router-dom zustand`
    - Styling: `npm install tailwindcss @tailwindcss/vite clsx tailwind-merge`
    - Icons: `npm install lucide-react`
    - Dev types: `npm install -D @types/node`

    NOTE: Do NOT install `postcss` or `autoprefixer` - Tailwind CSS 4 with @tailwindcss/vite handles this automatically.

    Delete the default App.css and any other default CSS files - we'll use Tailwind only.
  </action>
  <verify>
    `cd frontend && npm run dev` starts without errors.
    Check that frontend/node_modules exists.
    Check frontend/package.json contains all listed dependencies.
  </verify>
  <done>
    frontend/ directory exists with package.json containing react, react-router-dom, zustand, tailwindcss, @tailwindcss/vite, clsx, tailwind-merge, lucide-react.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Vite with Tailwind plugin, Flask proxy, and build output</name>
  <files>
    frontend/vite.config.ts
    frontend/src/index.css
    frontend/index.html
  </files>
  <action>
    Replace frontend/vite.config.ts with:
    ```typescript
    import { defineConfig } from 'vite';
    import react from '@vitejs/plugin-react';
    import tailwindcss from '@tailwindcss/vite';
    import path from 'path';

    export default defineConfig({
      plugins: [react(), tailwindcss()],
      resolve: {
        alias: {
          '@': path.resolve(__dirname, './src'),
        },
      },
      server: {
        port: 3000,
        proxy: {
          '/api': {
            target: 'http://localhost:5000',
            changeOrigin: true,
          },
          '/process': {
            target: 'http://localhost:5000',
            changeOrigin: true,
          },
          '/download': {
            target: 'http://localhost:5000',
            changeOrigin: true,
          },
          '/get-tags': {
            target: 'http://localhost:5000',
            changeOrigin: true,
          },
          '/share-receiver': {
            target: 'http://localhost:5000',
            changeOrigin: true,
          },
        },
      },
      build: {
        outDir: '../static/react',
        emptyOutDir: true,
      },
    });
    ```

    Replace frontend/src/index.css with Tailwind CSS 4 syntax:
    ```css
    @import "tailwindcss";

    /* Selector-based dark mode */
    @custom-variant dark (&:where(.dark, .dark *));

    /* Safe area utilities for mobile notch/home indicator */
    @utility safe-area-pb {
      padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    @utility safe-area-pt {
      padding-top: env(safe-area-inset-top, 0px);
    }

    /* Hebrew RTL font stack */
    :root {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }
    ```

    Replace frontend/index.html with RTL and dark mode:
    ```html
    <!DOCTYPE html>
    <html lang="he" dir="rtl" class="dark">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <meta name="theme-color" content="#030712" />
        <title>Workout Video Editor</title>
      </head>
      <body class="bg-gray-950 text-gray-100">
        <div id="root"></div>
        <script type="module" src="/src/main.tsx"></script>
      </body>
    </html>
    ```

    Update frontend/src/main.tsx to import index.css:
    ```typescript
    import { StrictMode } from 'react'
    import { createRoot } from 'react-dom/client'
    import './index.css'
    import App from './App.tsx'

    createRoot(document.getElementById('root')!).render(
      <StrictMode>
        <App />
      </StrictMode>,
    )
    ```

    Create a minimal App.tsx for testing:
    ```typescript
    export default function App() {
      return (
        <div className="min-h-screen bg-gray-950 text-gray-100 p-4">
          <h1 className="text-2xl font-bold">Workout Video Editor</h1>
          <p className="mt-2 text-gray-400">React frontend initialized.</p>
        </div>
      )
    }
    ```
  </action>
  <verify>
    Run `cd frontend && npm run dev` - should start on port 3000.
    Open http://localhost:3000 - should show dark background (gray-950) with white text.
    Text should be right-aligned (RTL direction).
    Run `cd frontend && npm run build` - should output to ../static/react/ directory.
  </verify>
  <done>
    - Vite dev server runs on port 3000
    - Dark theme displays (gray-950 background, gray-100 text)
    - RTL layout active (text right-aligned)
    - Build outputs to static/react/ folder
    - Proxy configured for all Flask routes
  </done>
</task>

</tasks>

<verification>
Run these commands to verify the phase foundation is working:

1. Start dev server: `cd frontend && npm run dev`
2. Open http://localhost:3000 - verify dark background and RTL text
3. Start Flask backend: `python server.py` (in another terminal)
4. Test proxy: Open browser devtools, try fetching /get-tags - should succeed without CORS error
5. Build: `cd frontend && npm run build` - verify static/react/ folder created
</verification>

<success_criteria>
- Vite dev server starts on port 3000 without errors
- Page displays dark theme (gray-950 background)
- Hebrew RTL direction active (dir="rtl" on html element)
- Tailwind CSS 4 classes work (dark:, bg-gray-*, text-*)
- Flask proxy works for /api, /process, /download, /get-tags, /share-receiver
- Production build outputs to static/react/
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-01-SUMMARY.md`
</output>
